{"version":3,"sources":["../../src/shared/preview-picture/preview-picture.module.ts","../../src/shared/select-picture/select-picture.module.ts","../../src/shared/select-picture/select-picture.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { PreviewPicturePage } from './preview-picture';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PreviewPicturePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PreviewPicturePage),\r\n  ],\r\n  exports: [\r\n    PreviewPicturePage\r\n  ]\r\n})\r\nexport class PreviewPicturePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/preview-picture/preview-picture.module.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SelectPicturePage } from './select-picture';\r\nimport {PreviewPicturePageModule} from \"../preview-picture/preview-picture.module\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SelectPicturePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SelectPicturePage),PreviewPicturePageModule\r\n  ],\r\n  exports: [\r\n    SelectPicturePage\r\n  ]\r\n})\r\nexport class SelectPicturePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/select-picture/select-picture.module.ts","import {Component, Input, Output, EventEmitter} from '@angular/core';\r\nimport {IonicPage, ActionSheetController, ModalController,AlertController} from 'ionic-angular';\r\nimport {FileObj} from \"../../model/FileObj\";\r\nimport {NativeService} from \"../../providers/NativeService\";\r\nimport {PreviewPicturePage} from \"../preview-picture/preview-picture\";\r\n\r\n/**\r\n * Generated class for the SelectPicturePage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-select-picture',\r\n  templateUrl: 'select-picture.html',\r\n})\r\nexport class SelectPicturePage {\r\n  @Input() max: number = 4;  //最多可选择多少张图片，默认为4张\r\n\r\n  @Input() allowAdd: boolean = true;  //是否允许新增\r\n\r\n  @Input() allowDelete: boolean = true;  //是否允许删除\r\n\r\n  @Input() fileObjList: FileObj[] = [];   //图片列表,与fileObjListChange形成双向数据绑定\r\n  @Output() fileObjListChange = new EventEmitter<any>();\r\n\r\n  constructor(private modalCtrl: ModalController,\r\n              private alertCtrl: AlertController,\r\n              private actionSheetCtrl: ActionSheetController,\r\n              private nativeService: NativeService) {\r\n  }\r\n\r\n  addPicture() {//新增照片\r\n    let that = this;\r\n    that.actionSheetCtrl.create({\r\n      buttons: [\r\n        {\r\n          text: '从相册选择',\r\n          handler: () => {\r\n            that.nativeService.getMultiplePicture({//从相册多选\r\n              maximumImagesCount: (that.max - that.fileObjList.length),\r\n              destinationType: 1//期望返回的图片格式,1图片路径\r\n            }).subscribe(imgs => {\r\n              for (let img of <string[]>imgs) {\r\n                that.getPictureSuccess(img);\r\n              }\r\n            });\r\n          }\r\n        },\r\n        {\r\n          text: '拍照',\r\n          handler: () => {\r\n            that.nativeService.getPictureByCamera({\r\n              destinationType: 1//期望返回的图片格式,1图片路径\r\n            }).subscribe(img => {\r\n              that.getPictureSuccess(img);\r\n            });\r\n          }\r\n        },\r\n        {\r\n          text: '取消',\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    }).present();\r\n  }\r\n\r\n  deletePicture(i) {//删除照片\r\n    if (!this.allowDelete) {\r\n      return;\r\n    }\r\n    this.alertCtrl.create({\r\n      title: '确认删除？',\r\n      buttons: [{text: '取消'},\r\n        {\r\n          text: '确定',\r\n          handler: () => {\r\n            this.fileObjList.splice(i, 1);\r\n          }\r\n        }\r\n      ]\r\n    }).present();\r\n  }\r\n\r\n  viewerPicture(index) {//照片预览\r\n    let picturePaths = [];\r\n    for (let fileObj of this.fileObjList) {\r\n      picturePaths.push(fileObj.origPath);\r\n    }\r\n    this.modalCtrl.create(PreviewPicturePage, {'initialSlide': index, 'picturePaths': picturePaths}).present();\r\n  }\r\n\r\n  private getPictureSuccess(img) {\r\n    let fileObj = <FileObj>{'origPath': img, 'thumbPath': img};\r\n    this.fileObjList.push(fileObj);\r\n    this.fileObjListChange.emit(this.fileObjList);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/select-picture/select-picture.ts"],"sourceRoot":""}